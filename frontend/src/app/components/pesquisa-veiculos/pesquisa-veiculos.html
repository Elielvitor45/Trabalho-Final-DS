<div class="pesquisa-container">
  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-content">
      <div class="logo" (click)="goToHome()">
        <h1>üöó LocadoraMax</h1>
      </div>

      <div class="nav-links">
        <a (click)="goToHome()" style="cursor: pointer;">Home</a>
        
        <div *ngIf="isAuthenticated">
          <span class="user-name-link" (click)="goToPerfil()">
            Ol√°, {{ firstName }}
          </span>
          <button class="btn-secondary" (click)="logout()">Sair</button>
        </div>
        
        <button *ngIf="!isAuthenticated" class="btn-primary" (click)="goToLogin()">
          Entrar
        </button>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section class="hero">
    <div class="hero-content">
      <h1 class="hero-title">Encontre o Ve√≠culo Perfeito</h1>
      <p class="hero-subtitle">Explore nossa frota completa e reserve agora mesmo!</p>
    </div>
  </section>

  <!-- Search and Filters -->
  <section class="filters-section">
    <div class="container">
      <!-- Barra de Pesquisa -->
      <div class="search-bar">
        <input 
          type="text" 
          [(ngModel)]="termoPesquisa"
          (keyup.enter)="pesquisar()"
          placeholder="Buscar por modelo, marca ou categoria..."
          class="search-input"
        >
        <button class="btn-search" (click)="pesquisar()">
          üîç Buscar
        </button>
      </div>

      <!-- Filtros de Categoria -->
      <div class="category-filters">
        <button 
          class="filter-btn"
          [class.active]="categoriaSelecionada === 'Todos'"
          (click)="filtrarPorCategoria('Todos')">
          Todos
        </button>
        
        <button 
          *ngFor="let categoria of categorias"
          class="filter-btn"
          [class.active]="categoriaSelecionada === categoria"
          (click)="filtrarPorCategoria(categoria)">
          {{ categoria }}
        </button>
        
        <button 
          *ngIf="categoriaSelecionada !== 'Todos' || termoPesquisa"
          class="btn-clear-filters"
          (click)="limparFiltros()">
          ‚úñ Limpar Filtros
        </button>
      </div>

      <!-- Resultados Info -->
      <div class="results-info">
        <p *ngIf="!loading">
          <strong>{{ veiculosFiltrados.length }}</strong> 
          {{ veiculosFiltrados.length === 1 ? 've√≠culo encontrado' : 've√≠culos encontrados' }}
        </p>
      </div>
    </div>
  </section>

  <!-- Loading -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>Carregando ve√≠culos...</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage && !loading" class="error-container">
    <div class="error-message">{{ errorMessage }}</div>
    <button class="btn-primary" (click)="loadVeiculos()">Tentar Novamente</button>
  </div>

  <!-- Vehicles Grid -->
  <section class="vehicles-section" *ngIf="!loading && !errorMessage">
    <div class="container">
      <!-- Nenhum resultado -->
      <div *ngIf="veiculosFiltrados.length === 0" class="no-results">
        <div class="no-results-icon">üöó</div>
        <h2>Nenhum ve√≠culo encontrado</h2>
        <p>Tente ajustar seus filtros ou termos de pesquisa</p>
        <button class="btn-primary" (click)="limparFiltros()">Ver Todos os Ve√≠culos</button>
      </div>

      <!-- Grid de Ve√≠culos -->
      <div *ngIf="veiculosFiltrados.length > 0" class="vehicles-grid">
        <div *ngFor="let veiculo of veiculosFiltrados" class="vehicle-card">
          <!-- Badge de categoria -->
          <div class="badge-categoria">{{ veiculo.categoria }}</div>
          
          <!-- √çcone do ve√≠culo -->
          <div class="vehicle-image">
            {{ getIconeCategoria(veiculo.categoria) }}
          </div>
          
          <!-- Informa√ß√µes -->
          <h3 class="vehicle-title">{{ veiculo.marca }} {{ veiculo.modelo }}</h3>
          <p class="vehicle-year">Ano: {{ veiculo.ano }}</p>
          
          <!-- Descri√ß√£o -->
          <p class="vehicle-description" *ngIf="veiculo.descricao">
            {{ veiculo.descricao }}
          </p>
          
          <!-- Pre√ßo -->
          <div class="vehicle-price">
            {{ formatarValor(veiculo.valorDiaria) }}<span class="price-period">/dia</span>
          </div>
          
          <!-- Informa√ß√µes Adicionais -->
          <ul class="vehicle-features">
            <li>‚úì Placa: {{ veiculo.placa }}</li>
            <li>‚úì {{ veiculo.categoria }}</li>
            <li *ngIf="veiculo.disponivel">‚úì Dispon√≠vel agora</li>
          </ul>
          
          <!-- Bot√µes de a√ß√£o -->
          <div class="vehicle-actions">
            <button class="btn-details" (click)="verDetalhes(veiculo.id)">
              Ver Detalhes
            </button>
            <button class="btn-rent" (click)="alugarVeiculo(veiculo.id)">
              {{ isAuthenticated ? 'Alugar Agora' : 'Fazer Login' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 LocadoraMax. Todos os direitos reservados.</p>
    </div>
  </footer>
</div>
